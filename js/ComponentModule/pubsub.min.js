/**
 * pubsub.js
 *
 * A tiny, optimized, tested, standalone and robust
 * pubsub implementation supporting different javascript environments
 *
 * @author Federico "Lox" Lucignano <http://plus.ly/federico.lox>
 *
 * @see https://github.com/federico-lox/pubsub.js
 */

/*global define, module*/
// LM: 2017-08-28 [Modified, remove asynchronous calling of publish. Every call is now synchronous.]
// LM: 2017-10-06 [Modified, using window instead of this.]
;(function(a){function b(){var b={},c=Function;return{publish:function(){var c=arguments,d=b[c[0]],e,f,g;if(d){e=d.length,f=c.length>1?Array.prototype.splice.call(c,1):[];for(g=0;g<e;g+=1)d[g].apply(a,f);d=a=f=null}},subscribe:function(a,d){if(typeof a!="string")throw"invalid or missing channel";if(d instanceof c)return b[a]||(b[a]=[]),b[a].push(d),{channel:a,callback:d};throw"invalid or missing callback"},unsubscribe:function(a,d){a.channel&&a.callback&&(d=a.callback,a=a.channel);if(typeof a!="string")throw"invalid or missing channel";if(!(d instanceof c))throw"invalid or missing callback";var e=b[a],f,g=e instanceof Array?e.length:0;for(f=0;f<g;f+=1)if(e[f]===d){e.splice(f,1);break}}}}"use strict",typeof define=="function"&&define.amd?define("pubsub",b):typeof module=="object"&&module.exports?module.exports=b():a.PubSub=b()})(window);